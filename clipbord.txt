function saveCityToStorage(city) {
  let cities = JSON.parse(localStorage.getItem("recentCities")) || [];
  if (!cities.includes(city)) {
    cities.push(city);
    if (cities.length > 5) {
      // Limit to last 5 cities
      cities.shift();
    }
    localStorage.setItem("recentCities", JSON.stringify(cities));
  }
}

function loadRecentCities() {
  let cities = JSON.parse(localStorage.getItem("recentCities")) || [];
  recentCitiesDropdown.innerHTML = "";
  if (cities.length > 0) {
    recentCitiesDropdown.classList.remove("hidden");
    cities.forEach((city) => {
      let option = document.createElement("option");
      option.value = city;
      option.textContent = city;
      recentCitiesDropdown.appendChild(option);
    });
  } else {
    recentCitiesDropdown.classList.add("hidden");
  }
}

function (getWeather) {
      saveCityToStorage(city);
  loadRecentCities();
}

// Load weather when a city is selected from the dropdown
recentCitiesDropdown.addEventListener("change", () => {
  const selectedCity = recentCitiesDropdown.value;
  getWeather(selectedCity);
});

// Load recent cities on page load
document.addEventListener("DOMContentLoaded", () => {
  loadRecentCities();
});
